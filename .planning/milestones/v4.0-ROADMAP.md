# Milestone v4.0: Clipboard Builder

**Status:** SHIPPED 2026-02-07
**Phases:** 55-60
**Total Plans:** 18

## Overview

v4.0 enables teachers to build slide decks via copy-paste from PowerPoint, paste images directly, and then unify mismatched content with AI-powered condensation. After building, teachers can upload a lesson plan to identify gaps and generate missing slides. This milestone transforms Cue from a PDF-first tool to a flexible deck builder.

## Phases

### Phase 55: Paste Infrastructure

**Goal:** Users can paste slide content from PowerPoint and have it appear as a new slide in Cue
**Depends on:** None (foundation phase)
**Plans:** 3 plans

Plans:

- [x] 55-01: Types and usePaste hook foundation
- [x] 55-02: handlePasteSlide handler and UI integration
- [x] 55-03: Cross-browser verification checkpoint

**Details:**
Requirements: CLIP-01, CLIP-03, CLIP-04, CLIP-05
PowerPoint slides paste as images due to browser clipboard limitations. Phase 56 adds AI text extraction.

### Phase 56: AI Slide Analysis

**Goal:** Pasted slides are automatically improved by AI to match Cue's presentation style
**Depends on:** Phase 55
**Plans:** 2 plans

Plans:

- [x] 56-01: AI analysis provider infrastructure (prompts, schemas, both providers)
- [x] 56-02: Paste flow integration and before/after comparison UI

**Details:**
Requirements: CLIP-02, CLIP-06
Design refined during testing: pasted slides display original image full-screen, AI-extracted content drives teleprompter only. Original visuals preserved for functional teaching content.

### Phase 57: Image Paste

**Goal:** Users can paste images directly and have them display as full-slide visuals
**Depends on:** Phase 55
**Plans:** 4 plans

Plans:

- [x] 57-01: Image paste routing and compression (IMG-01, IMG-03)
- [x] 57-02: AI image caption infrastructure (IMG-05 backend)
- [x] 57-03: Drag-drop, Full Image layout, and AI caption UI (IMG-02, IMG-04, IMG-05 UI)
- [x] 57-04: Visual verification checkpoint

**Details:**
Requirements: IMG-01, IMG-02, IMG-03, IMG-04, IMG-05
Two bugs fixed during verification: PowerPoint paste misrouted to image-only path (fixed via HTML signature detection), AI caption was one big block instead of teleprompter segments (fixed by returning talkingPoints[] array).

### Phase 58: Deck Cohesion

**Goal:** Users can unify mismatched slides into a coherent deck with consistent tone and flow
**Depends on:** Phases 55-57
**Plans:** 3 plans

Plans:

- [x] 58-01: Cohesion prompts, types, interface, and Gemini provider implementation
- [x] 58-02: Claude provider implementation
- [x] 58-03: CohesionPreview modal and App.tsx integration

**Details:**
Requirements: COHE-01, COHE-02, COHE-03, COHE-04
Dual-provider support (Gemini + Claude) with structured output. CohesionPreview modal uses ReactDiffViewer for word-level diffs. Deck serializer caps at 20 slides with 200-char speaker notes truncation.
**Note:** SUPERSEDED by Phase 60. CohesionPreview.tsx deleted, replaced by CondensationPreview.tsx.

### Phase 59: Gap Analysis

**Goal:** Users can identify missing content by comparing their deck against a lesson plan
**Depends on:** Phase 58
**Plans:** 3 plans

Plans:

- [x] 59-01: Gap analysis AI infrastructure (prompts, types, schemas, Gemini implementation)
- [x] 59-02: Claude provider implementation and GapAnalysisPanel UI component
- [x] 59-03: App.tsx integration (button, PDF upload, handlers, panel wiring)

**Details:**
Requirements: GAP-01, GAP-02, GAP-03, GAP-04, GAP-05, GAP-06
Dual-provider gap analysis (Gemini + Claude) with multimodal lesson plan input. GapAnalysisPanel shows severity-ranked gaps with one-click slide generation and position drift correction.

### Phase 60: Deck Condensation

**Goal:** Rework the "Make Cohesive" button into a lesson-plan-aware deck condensation tool
**Depends on:** Phase 59
**Plans:** 3 plans

Plans:

- [x] 60-01: Types, prompts, Gemini provider, cohesion cleanup
- [x] 60-02: Claude provider condenseDeck
- [x] 60-03: CondensationPreview + App.tsx integration

**Details:**
Requirements: COND-01, COND-02, COND-03, COND-04, COND-05
Replaces Phase 58 cohesion entirely. Dual-provider (Gemini + Claude) with multimodal lesson plan support. Four-action model: keep/edit/remove/merge. CohesionPreview.tsx deleted, replaced by CondensationPreview.tsx.

---

## Milestone Summary

**Key Decisions:**

- Pasted slides preserve original image full-screen; AI content drives teleprompter only (Phase 56)
- HTML signature detection to distinguish PowerPoint paste from image-only paste (Phase 57)
- Deck serializer capped at 20 slides with 200-char speaker notes truncation (Phase 58)
- Condensation replaces cohesion entirely with four-action model (Phase 60)
- Shared lesson plan state between gap analysis and condensation (Phase 60)
- Apply order: edits -> merges -> batch ID removal to avoid index corruption (Phase 60)

**Issues Resolved:**

- PowerPoint paste misrouted to image-only path (fixed via HTML signature detection)
- AI caption returned as single block instead of teleprompter segments (fixed with talkingPoints[] array)
- Cohesion feature superseded by more powerful condensation feature

**Issues Deferred:**

- Slide Editor canvas mode for composing images on pasted slides (captured as todo)
- Per-slide accept/reject for condensation suggestions (COHE-06 deferred)
- Multi-slide paste from PowerPoint (INT-01 deferred)

**Technical Debt Incurred:**

- cohesionPrompts.ts file still named "cohesion" despite being a generic deck serializer (cosmetic)
- buildDeckContextForCohesion function named "Cohesion" but used by condensation and gap analysis (cosmetic)

---

_For current project status, see .planning/ROADMAP.md_
