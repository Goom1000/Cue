# Requirements Archive: v5.0 Smart Generation

**Archived:** 2026-02-15
**Status:** SHIPPED

For current requirements, see `.planning/REQUIREMENTS.md`.

---

# Requirements: Cue v5.0 Smart Generation

**Defined:** 2026-02-08
**Core Value:** Students see only the presentation; teachers see the teleprompter script that lets them sound knowledgeable and natural.

## v5.0 Requirements

Requirements for v5.0 milestone. Each maps to roadmap phases.

### Generation Pipeline

- [x] **PIPE-01**: Generation pipeline automatically cross-references slides against lesson plan and fills critical/recommended gaps without manual intervention — v5.0
- [x] **PIPE-02**: Coverage score displays after generation showing percentage of lesson plan covered (e.g., "87% covered") — v5.0
- [x] **PIPE-03**: Multi-pass progress feedback shows which pipeline stage is active (generating → checking coverage → filling gaps) with progress bar — v5.0
- [x] **PIPE-04**: Pipeline degrades gracefully — if gap analysis fails, teacher still receives Pass 1 slides with a warning — v5.0
- [x] **PIPE-05**: Remaining nice-to-have gaps are shown in the existing gap analysis panel for optional manual addition — v5.0
- [x] **PIPE-06**: Gap slides insert at correct positions without corrupting existing slide order (single-pass merge) — v5.0
- [x] **PIPE-07**: Pipeline supports cancellation via AbortController — partial results from completed passes are preserved — v5.0

### Resource Integration

- [x] **RES-01**: Teacher can upload supplementary resources (PDF, images, DOCX, PPTX) alongside lesson plan on landing page — v5.0
- [x] **RES-02**: Uploaded resources are processed to extract text and images using existing document processors — v5.0
- [x] **RES-03**: PPTX files are parsed for text and images via JSZip + DOMParser (no new dependencies) — v5.0
- [x] **RES-04**: AI weaves resource content into relevant slides with callout references (e.g., "[See: Case Study]") — v5.0
- [x] **RES-05**: Resource content is capped per resource (2,000 chars) and total (6,000 chars) to prevent token overflow — v5.0
- [x] **RES-06**: Resources uploaded on landing page pre-populate ResourceHub (no re-uploading needed) — v5.0
- [x] **RES-07**: Resource references persist in .cue save file and survive save/load cycle — v5.0

### Lesson Phase Detection

- [x] **PHASE-01**: Slides are tagged with lesson phase (Hook, I Do, We Do, We Do Together, You Do, Plenary) after generation — v5.0
- [x] **PHASE-02**: Phase detection uses regex pattern matching on lesson plan text with comprehensive synonym dictionary (UK/Australian terminology) — v5.0
- [x] **PHASE-03**: Color-coded phase badges display on slide cards in the editor sidebar — v5.0
- [x] **PHASE-04**: Phase balance indicator shows distribution across phases with suggestions if any phase is 0% — v5.0
- [x] **PHASE-05**: Teacher can manually override phase labels by clicking the badge (dropdown selector) — v5.0
- [x] **PHASE-06**: Phase labels persist in .cue save file and display correctly on reload — v5.0
- [x] **PHASE-07**: Phase detection only applies to Fresh and Blend modes (not Refine — arbitrary PPTs don't follow GRR model) — v5.0

### Dual-Provider Parity

- [x] **PROV-01**: All new generation pipeline features work identically on both Gemini and Claude providers — v5.0
- [x] **PROV-02**: Resource content injection uses the same prompt structure for both providers — v5.0

## Future Requirements

Deferred to v5.1 or later.

### Generation Pipeline

- **PIPE-F01**: Early preview — show slides after Pass 1 while pipeline continues in background
- **PIPE-F02**: Resource-aware gap analysis (gaps consider uploaded resources as "covered" content)

### Lesson Phases

- **PHASE-F01**: Phase labels visible in teleprompter during presentation mode
- **PHASE-F02**: Phase-aware gap analysis (gap fill slides respect phase boundaries for insertion position)

## Out of Scope

| Feature | Reason |
|---------|--------|
| Full canvas slide editor | Too complex, risks destabilizing 35k LOC codebase (deferred as annotation layer todo) |
| Animation timeline | Disconnects from teleprompter model, massive scope |
| New npm dependencies | Research confirmed zero new packages needed |
| AI-based phase detection | Regex handles finite vocabulary in 0ms vs 3s AI call; not needed |
| Automatic resource enhancement during generation | Resource integration (context injection) is separate from resource enhancement (differentiation) |
| Resource upload in Refine mode | Refine mode works with arbitrary PPTs; resource context would conflict |

## Traceability

Which phases cover which requirements. Updated during roadmap creation.

| Requirement | Phase | Status |
|-------------|-------|--------|
| PIPE-01 | Phase 67 | ✓ Shipped |
| PIPE-02 | Phase 67 | ✓ Shipped |
| PIPE-03 | Phase 67 | ✓ Shipped |
| PIPE-04 | Phase 67 | ✓ Shipped |
| PIPE-05 | Phase 67 | ✓ Shipped |
| PIPE-06 | Phase 67 | ✓ Shipped |
| PIPE-07 | Phase 67 | ✓ Shipped |
| RES-01 | Phase 66 | ✓ Shipped |
| RES-02 | Phase 66 | ✓ Shipped |
| RES-03 | Phase 66 | ✓ Shipped |
| RES-04 | Phase 68 | ✓ Shipped |
| RES-05 | Phase 66 | ✓ Shipped |
| RES-06 | Phase 68 | ✓ Shipped |
| RES-07 | Phase 66 | ✓ Shipped |
| PHASE-01 | Phase 65 | ✓ Shipped |
| PHASE-02 | Phase 65 | ✓ Shipped |
| PHASE-03 | Phase 68 | ✓ Shipped |
| PHASE-04 | Phase 68 | ✓ Shipped |
| PHASE-05 | Phase 68 | ✓ Shipped |
| PHASE-06 | Phase 65 | ✓ Shipped |
| PHASE-07 | Phase 65 | ✓ Shipped |
| PROV-01 | Phase 68 | ✓ Shipped |
| PROV-02 | Phase 68 | ✓ Shipped |

**Coverage:**
- v5.0 requirements: 23 total
- Mapped to phases: 23
- Unmapped: 0

---
*Requirements defined: 2026-02-08*
*Last updated: 2026-02-14 after roadmap creation*
