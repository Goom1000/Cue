# Milestone v3.0: Quiz Game Variety

**Status:** SHIPPED 2026-01-24
**Phases:** 20-26
**Total Plans:** 33

## Overview

v3.0 transformed Cue from a single-game quiz tool into a multi-game platform with TV show-style formats. The journey started by establishing a unified game architecture that prevents state silos and code duplication, then proved the framework by refactoring the existing quiz and building the simplest new game (Millionaire). Once patterns were validated, we extended AI generation for game-specific question needs, implemented timer-based games (The Chase, Beat the Chaser), added competition modes, and ensured seamless synchronization across teacher and student views.

## Phases

### Phase 20: Game Foundation & Type System

**Goal**: Establish unified game architecture that prevents state silos and enables all game formats
**Depends on**: Phase 19
**Requirements**: FOUND-01, FOUND-02, FOUND-03, FOUND-04, FOUND-05
**Plans**: 3 plans

Plans:
- [x] 20-01-PLAN.md - Type system & game menu dropdown
- [x] 20-02-PLAN.md - Game container & Quick Quiz refactor
- [x] 20-03-PLAN.md - Integration & CSS animations

**Details:**
- Created GameType union (quick-quiz, millionaire, the-chase, beat-the-chaser)
- Discriminated union architecture with BaseGameState and game-specific states
- GameMenu dropdown component replacing old quiz button
- GameContainer router with exhaustive switch for game rendering
- Flash reveal and crossfade CSS animations

### Phase 21: Millionaire Game

**Goal**: Students play Who Wants to Be a Millionaire with configurable question count (3, 5, or 10) and functional lifelines
**Depends on**: Phase 20
**Requirements**: MILL-01, MILL-02, MILL-03, MILL-04, MILL-05, MILL-06, MILL-07, MILL-08
**Plans**: 4 plans

Plans:
- [x] 21-01-PLAN.md - Type extensions & money tree component
- [x] 21-02-PLAN.md - Question display & game flow
- [x] 21-03-PLAN.md - Lifeline system with AI phone-a-friend
- [x] 21-04-PLAN.md - Student view & celebration animations

**Details:**
- Money tree with configurable prize ladders (3/5/10 questions)
- Safe haven system at appropriate positions
- 50:50 eliminates 2 wrong answers
- Ask the Audience shows difficulty-scaled poll percentages
- Phone-a-Friend uses AI to generate realistic hints
- Victory/wrong answer celebration overlays with CSS animations

### Phase 22: AI Integration

**Goal**: AI generates game-specific questions with appropriate difficulty progression
**Depends on**: Phase 21
**Requirements**: AI-01, AI-02, AI-03, AI-04
**Plans**: 4 plans

Plans:
- [x] 22-01-PLAN.md - Game question types & interface extension
- [x] 22-02-PLAN.md - Gemini provider implementation
- [x] 22-03-PLAN.md - Claude provider implementation
- [x] 22-04-PLAN.md - Game launch integration with auto-retry

**Details:**
- GameDifficulty type (easy/medium/hard) mapping to Bloom's taxonomy
- Progressive difficulty for Millionaire (easy -> hard)
- Consistent difficulty for Chase/Beat the Chaser
- buildSlideContext helper for cumulative slide content
- withRetry helper with exponential backoff for transient failures

### Phase 23: The Chase

**Goal**: Students play The Chase with multi-phase gameplay and timer-based rounds
**Depends on**: Phase 22
**Requirements**: CHASE-01, CHASE-02, CHASE-03, CHASE-04, CHASE-05, CHASE-06, CHASE-07, CHASE-08, CHASE-09, CHASE-10
**Plans**: 8 plans

Plans:
- [x] 23-01-PLAN.md - TheChaseState types & useTimer hook
- [x] 23-02-PLAN.md - GameBoard component & useChaserAI hook
- [x] 23-03-PLAN.md - Cash Builder round with 60s timer
- [x] 23-04-PLAN.md - Offer Selection with class voting
- [x] 23-05-PLAN.md - Head-to-Head chase mechanics
- [x] 23-06-PLAN.md - Final Chase with pushback mechanic
- [x] 23-07-PLAN.md - TheChaseGame orchestrator & integration
- [x] 23-08-PLAN.md - Student view for all Chase phases

**Details:**
- 7-step game board with contestant/chaser positions
- Cash Builder with 60s timer and $1000 per correct answer
- Three-offer system with position selection
- Head-to-Head turn-based mechanics
- Final Chase with pushback mechanic
- AI-controlled chaser with configurable accuracy (60%/75%/90%)
- Note: Disabled in UI per user preference, code preserved

### Phase 24: Beat the Chaser

**Goal**: Students play Beat the Chaser with dual independent timers
**Depends on**: Phase 23
**Requirements**: BEAT-01, BEAT-02, BEAT-03, BEAT-04, BEAT-05, BEAT-06, BEAT-07, BEAT-08
**Plans**: 5 plans

Plans:
- [x] 24-01-PLAN.md - Type extensions & setup modal
- [x] 24-02-PLAN.md - Cash Builder phase (time accumulation)
- [x] 24-03-PLAN.md - Timed Battle phase (dual timers)
- [x] 24-04-PLAN.md - Game orchestrator & integration
- [x] 24-05-PLAN.md - Student view for all phases

**Details:**
- Difficulty selection affects chaser timer ratio (0.8x/1.0x/1.2x)
- Cash Builder awards 5 seconds per correct answer
- Dual independent timers (only active player's counts down)
- Catch-up mechanic: +5s to contestant when chaser wrong
- Instant loss on timer expiry

### Phase 25: Competition Modes

**Goal**: Teacher can choose individual or team competition for any game
**Depends on**: Phase 24
**Requirements**: COMP-01, COMP-02, COMP-03, COMP-04
**Plans**: 5 plans

Plans:
- [x] 25-01-PLAN.md — Type system & team name generator
- [x] 25-02-PLAN.md — CompetitionModeSection shared component
- [x] 25-03-PLAN.md — Score display components (teacher & student)
- [x] 25-04-PLAN.md — Setup modal integration (all 4 games)
- [x] 25-05-PLAN.md — Orchestrator & score tracking integration

**Details:**
- Individual mode with single player name
- Team mode with 2-10 teams and auto-generated names
- Fisher-Yates shuffle for fair team name generation
- ScoreOverlay on teacher view with +/- manual adjustment
- ScoreDisplay on student view with classroom-optimized styling
- Active team highlight with amber glow

### Phase 26: Student View Integration

**Goal**: All games display correctly on student view with proper synchronization
**Depends on**: Phase 25
**Requirements**: VIEW-01, VIEW-02, VIEW-03, VIEW-04
**Plans**: 4 plans

Plans:
- [x] 26-01-PLAN.md — CSS animations & shared component enhancements
- [x] 26-02-PLAN.md — The Chase student view with banners & large timers
- [x] 26-03-PLAN.md — Beat the Chaser student view enhancements
- [x] 26-04-PLAN.md — Final verification & answer reveal polish

**Details:**
- PhaseBanner component for game phase display
- UrgentTimer with screen glow effect at <=10 seconds
- Answer dimming until teacher reveals
- Score change animations
- Rapid pulse animation for urgency
- Multiple bug fixes during verification (lifeline overlays, question shuffling, chaser turn)

---

## Milestone Summary

**Key Decisions:**
- Discriminated union game state architecture for type-safe routing
- Game state factories for consistent initial state creation
- Atomic BroadcastChannel state snapshots (no incremental actions)
- Bloom's taxonomy mapping for difficulty levels
- Fisher-Yates shuffle for answer position randomization
- The Chase disabled in UI but code preserved per user preference
- useRef pattern for preventing overlay re-render loops

**Issues Resolved:**
- Phone-a-Friend and Audience Poll reopening immediately after close
- Beat the Chaser not loading past splash screen
- Correct answer always in position A (randomized)
- Chaser turn stuck on same question (turnPhase state timing)
- Questions too complex for 10-year-olds (simplified prompts)

**Issues Deferred:**
- Sound effects and music (user provides drama verbally)
- Multiple chasers in Beat the Chaser (v3.1+)
- Custom question bank entry (v3.1+)

**Technical Debt Incurred:**
- GameContainer missing assertNever default case (implicit exhaustiveness works)
- Phase 26 missing VERIFICATION.md (plans executed successfully)
- PlaceholderStudentView dead code (unused fallback)

---

*For current project status, see .planning/ROADMAP.md*
*Archived: 2026-01-24 as part of v3.0 milestone completion*
