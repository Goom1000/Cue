# Feature Landscape: Scripted Import, Day Picker, Claude Chat Tips

**Domain:** Structured lesson plan import for teaching presentation app
**Researched:** 2026-02-19
**Confidence:** HIGH (domain well-understood from extensive codebase review)

## Context: What Exists vs What We Are Building

**Current Cue import modes:**
- **Fresh:** Upload PDF/DOCX/PPTX lesson plan. AI reads text + images, generates entire slide deck from scratch. Three-pass pipeline (generate, check gaps, fill gaps). ~30-60 seconds, 23K-45K tokens.
- **Refine:** Upload existing presentation. AI restructures into Cue-style slides preserving all content. Single-pass generation.
- **Blend:** Upload both lesson plan AND presentation. AI synthesizes both sources into one deck.

**The gap:** All three modes run the full AI generation pipeline. The AI rewrites, restructures, and paraphrases the teacher's content. For teachers who have written detailed scripted lesson plans (with explicit `Say:`, `Write on board:`, `Ask:` markers), this AI rewriting is actively harmful -- it discards the teacher's carefully crafted wording and replaces it with AI-generated paraphrases.

**v6.0 approach:** Add a fourth mode -- `scripted` -- that preserves the teacher's text verbatim and uses AI only for image prompts and layout assignment. Add day/section splitting for multi-day plans. Provide Claude chat prompt templates so teachers can generate Cue-optimized plans directly.

---

## Table Stakes

Features users expect. Missing = the scripted import feels broken or incomplete.

| Feature | Why Expected | Complexity | Notes |
|---------|--------------|------------|-------|
| Verbatim script preservation | The entire value proposition. If the AI rewrites "Say: Good morning, today we're exploring fractions" into its own version, the feature has failed. Teacher's exact words must appear in `speakerNotes`. | Med | Direct mapping from `say` blocks to `speakerNotes` segments. No AI content generation. |
| Automatic marker detection | Teacher should not have to manually tag content. Upload the document, Cue recognizes `Say:`, `Ask:`, section headings automatically. | Med | Regex patterns following `phasePatterns.ts` architecture. ~15 marker patterns. |
| Slide boundary detection | A scripted lesson plan has natural slide boundaries (section headings, phase transitions). The parser must identify where one slide ends and another begins. | Med | Combination of section headings, phase markers, and `---` separators. Fallback: each major marker block becomes a slide. |
| Progressive disclosure mapping | `Say:` blocks must map to pointing-right delimited `speakerNotes` segments so the teleprompter works normally during presentation. | Low | Straightforward: each `say` block within a slide = one pointing-right segment. First segment = intro. |
| Image prompts generated by AI | Slides need images. The teacher's script doesn't include image descriptions. AI must generate one-sentence `imagePrompt` per slide based on the slide content. | Low | Small, cheap AI call. Same provider interface, minimal prompt. |
| Layout assignment by AI | Each slide needs a `layout` value from the existing enum. AI picks the best match based on content type. | Low | Same as image prompts -- piggyback on the same AI call. |
| Phase detection on imported content | Scripted plans should get lesson phase labels (Hook, I Do, We Do, etc.) just like AI-generated decks. | Low | Already built. `detectPhasesInText()` + `assignPhasesToSlides()` run on any text. Zero work. |
| Question flag detection | `Ask:` blocks should set `hasQuestionFlag: true` on the slide for in-presentation question features. | Low | Direct mapping during block-to-slide conversion. |

## Differentiators

Features that set scripted import apart from "just paste text in a notes app."

| Feature | Value Proposition | Complexity | Notes |
|---------|-------------------|------------|-------|
| Multi-day lesson plan splitting | Teachers often write week-long lesson plans as a single document. Being able to select "Day 3" and import just that day's content is powerful -- no other presentation tool does this. | Med | Day boundary detection regex + DayPicker UI component. Teacher selects which day(s) to import. |
| Claude chat prompt template | Teachers using Claude in chat can copy a pre-built prompt that tells Claude to output lesson plans in Cue-compatible format. This creates a pipeline: Claude generates structured plan -> Teacher copies into Cue -> Scripted import preserves it perfectly. | Low | Static JSX page with copy button. No API integration needed. |
| Mixed-marker tolerance | Real lesson plans mix explicit markers (`Say:`) with unmarked prose. The parser should handle partially-marked documents gracefully -- detecting what it can, treating the rest as general content. | Med | Unmarked text between markers becomes slide content bullets. No hard failure if document only has some markers. |
| Content-type slide mapping | `Ask:` blocks could auto-set question-optimized layouts. `Activity:` blocks could auto-set `work-together` slide type. This gives scripted imports slide variety without AI. | Low | Lookup table: marker type -> default layout + slideType. |
| Timing annotation extraction | `(5 min)` or `Time: 10 minutes` annotations common in lesson plans could be surfaced in UI or teleprompter. | Low | Regex detection, store as metadata on slides. Nice for teacher reference. |
| Import preview | Before generating, show the teacher what was detected: "Found 3 days, 12 sections, 45 script blocks. Day 1 has Hook, I Do, We Do, You Do, Plenary." Builds confidence in the parser. | Med | Render `ScriptedParseResult` as a summary card. Teacher confirms before proceeding. |

## Anti-Features

Features to explicitly NOT build. Each would add complexity without proportional value.

| Anti-Feature | Why Avoid | What to Do Instead |
|--------------|-----------|-------------------|
| AI rewriting of scripted content | Defeats the entire purpose of scripted mode. If the teacher wanted AI paraphrasing, they'd use Fresh mode. | Preserve verbatim. AI touches only image prompts and layouts. |
| Gap analysis for scripted mode | The teacher's script IS the authority. Running gap analysis implies the script is incomplete, which is disrespectful to the teacher's preparation. | Skip Pass 2/3 entirely. If teacher wants coverage analysis, they can switch to Fresh mode and compare. |
| Verbosity variants for scripted mode | Scripted text is the teacher's chosen verbosity. Concise/standard/detailed variants would require AI rewriting, which contradicts verbatim preservation. | Use teacher's text as-is. No verbosity toggle in scripted mode. |
| Claude API integration | Connecting to Claude's API from within Cue for automatic lesson plan generation. This would require API key management, a second provider flow, and blurs the boundary between "use Claude to generate" and "import Claude's output." | Provide a copyable prompt template. Teacher uses their own Claude chat session, pastes the output into Cue. Simple, no auth needed, no API costs. |
| Automatic day detection without confirmation | Auto-importing all days without letting the teacher choose creates unwanted content. A 5-day plan imported in full would produce 50+ slides. | Always show day picker when multi-day detected. Default to first day selected. |
| Real-time collaborative editing of the parsed structure | Allowing the teacher to reorder blocks, edit markers, reassign sections in a drag-and-drop interface before import. | Parse, preview, import. Post-import editing uses the existing slide editor. The parser should produce a good first pass, not a perfect one. |
| Custom marker configuration | Letting teachers define their own markers ("My school uses 'Teacher Script:' instead of 'Say:'"). | Support the 10-15 most common variants out of the box. If a teacher's marker isn't recognized, they can add `Say:` prefix manually. The marker set can be expanded based on feedback. |
| Markdown-to-rich-text conversion | Converting Markdown bold/italic/links in lesson plans to styled slide content. | Slides use plain text arrays. Strip Markdown formatting during parsing. Keep it simple -- the slide content is for the teleprompter, not a document renderer. |

---

## Feature Dependencies

```
scriptedParser.ts (marker detection + day splitting)
  |
  +-> DayPicker.tsx (UI for multi-day selection)
  |     |
  |     +-> scriptedMapper.ts (selected blocks -> Slide[])
  |           |
  |           +-> AI image/layout call (minimal, per-slide)
  |           |
  |           +-> phaseDetector.ts (assign lesson phases)
  |           |
  |           +-> generationPipeline.ts (scripted branch, return slides)
  |
  +-> ClaudeTips.tsx (independent, no dependencies on parser)
```

**Critical path:** `scriptedParser.ts` -> `scriptedMapper.ts` -> pipeline integration
**Independent:** `ClaudeTips.tsx` can be built in any order
**Dependent on parser:** `DayPicker.tsx` needs `ScriptedParseResult` type

---

## MVP Recommendation

**Phase 1: Core Scripted Import**
1. Scripted parser with marker detection (table stakes -- the whole feature depends on this)
2. Block-to-slide mapper with verbatim preservation
3. Import mode selector on landing page ("Fresh", "Refine", "Blend", "Scripted")
4. AI image prompt + layout assignment (minimal AI call)
5. Phase detection integration

**Phase 2: Multi-Day Support**
6. Day boundary detection in parser
7. Day picker UI component
8. Selected-day filtering before mapping

**Phase 3: Claude Chat Tips**
9. Prompt template page with copy button
10. Example output showing expected format

**Defer:**
- Timing annotation extraction: Nice-to-have, not core value. Can be added post-launch.
- Import preview panel: Useful but not blocking. Can show a simple "Detected X sections" toast initially, build full preview later.

---

## Marker Catalogue

The scripted parser should detect these markers, grouped by category. Each has structural (line-anchored) and content (inline) variants following the `phasePatterns.ts` pattern.

### Teacher Speech Markers
| Marker | Variants | Example |
|--------|----------|---------|
| `Say:` | "Say:", "Teacher says:", "Script:", "Read aloud:", "Read out:", "Tell students:" | `Say: Good morning everyone, today we're going to explore fractions.` |

### Board Work Markers
| Marker | Variants | Example |
|--------|----------|---------|
| `Write on board:` | "Write on board:", "Board:", "Board work:", "Write:", "Display:", "Show:" | `Write on board: 3/4 + 1/4 = 1` |

### Question Markers
| Marker | Variants | Example |
|--------|----------|---------|
| `Ask:` | "Ask:", "Ask students:", "Ask the class:", "Question:", "Q:", "Check for understanding:" | `Ask: What do you think the denominator tells us?` |

### Activity Markers
| Marker | Variants | Example |
|--------|----------|---------|
| `Activity:` | "Activity:", "Task:", "Do:", "Students do:", "Independent practice:", "Group work:", "Partner task:" | `Activity: Students work in pairs to find 3 equivalent fractions for 1/2.` |

### Resource Reference Markers
| Marker | Variants | Example |
|--------|----------|---------|
| `Resource:` | "Resource:", "Handout:", "Worksheet:", "See:", "Use:", "Distribute:" | `Resource: Hand out the fractions worksheet (page 3).` |

### Timing Markers
| Marker | Variants | Example |
|--------|----------|---------|
| Timing | "(5 min)", "(5 minutes)", "Time: 10 min", "[10 minutes]", "5 mins" | `(5 min) Ask: What is 1/2 of 20?` |

### Day/Session Boundaries
| Marker | Variants | Example |
|--------|----------|---------|
| Day boundary | "## Day 1", "Day 1:", "--- Day 1 ---", "LESSON 1", "Session 1:" | `## Day 1: Introduction to Fractions` |

### Section Headings (reuse phase detection)
| Marker | Variants | Example |
|--------|----------|---------|
| Phase heading | "## Hook", "### I Do", "We Do:", "Independent Practice:" | `## Hook: The Pizza Problem` |

---

## Claude Chat Output Format Specification

The prompt template should instruct Claude to output lesson plans in this format:

```markdown
## Day 1: [Topic]

### Hook
Say: [Teacher's opening script]
Ask: [Engagement question]

### I Do (Modelling)
Say: [Teacher explanation]
Write on board: [Key content to display]
Say: [Continue explanation]

### We Do (Guided Practice)
Say: [Instructions for guided practice]
Activity: [Description of what students do together]
Ask: [Check for understanding question]

### You Do (Independent Practice)
Activity: [Description of independent task]
Resource: [Any worksheets or materials needed]
(10 min)

### Plenary
Ask: [Reflection question]
Say: [Summary and preview of next lesson]

---

## Day 2: [Topic]
...
```

This format:
- Uses standard Markdown headings (detected by existing phase patterns)
- Uses explicit markers (detected by scripted parser)
- Separates days with `---` + `## Day N` (detected by day boundary regex)
- Is human-readable even without Cue (teacher can read the raw text)
- Is unambiguous for machine parsing

---

## Sources

- **Codebase analysis** (HIGH confidence): Feature landscape derived from understanding existing capabilities
  - `phaseDetection/phasePatterns.ts` -- marker pattern architecture
  - `contentPreservation/detector.ts` -- question/activity detection (Ask: patterns already exist)
  - `generationPipeline.ts` -- pipeline mode gating
  - `geminiService.ts` -- generation prompt structure and mode handling
  - `types.ts` -- Slide interface, generation modes
- **Domain knowledge** (HIGH confidence): Structured lesson plan formats are well-established in UK/Australian education
