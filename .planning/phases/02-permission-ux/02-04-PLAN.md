---
phase: 02-permission-ux
plan: 04
type: execute
wave: 4
depends_on: ["02-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All permission UX elements verified working by human"
    - "Button labels change correctly based on permission state"
    - "Toast appears after launch with correct placement message"
    - "Permission link triggers browser prompt"
    - "Recovery modal shows correct browser instructions"
  artifacts: []
  key_links: []
---

<objective>
Human verification of all Phase 2 permission UX features.

Purpose: Confirm that the permission UX works correctly across all permission states. This requires a human to grant/deny permissions and observe UI behavior.

Output: Verified phase completion.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-permission-ux/02-CONTEXT.md
@.planning/phases/02-permission-ux/02-01-SUMMARY.md
@.planning/phases/02-permission-ux/02-02-SUMMARY.md
@.planning/phases/02-permission-ux/02-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete permission UX overhaul: dynamic button labels, warning icon, launch toast, inline permission link, and recovery modal</what-built>
  <how-to-verify>
**Setup:** You need a Chromium browser (Chrome or Edge) with an external display connected. The Window Management permission should be in 'prompt' state initially.

**To reset permission to 'prompt' state:**
1. Click lock icon in address bar
2. Site settings -> Window management -> Reset to "Ask"
3. Refresh page

**Test each state:**

1. **Loading State:**
   - Refresh page
   - Button should briefly show "Checking displays..."
   - No permission UI should flash during this time

2. **Prompt State (permission not yet requested):**
   - Button shows "Launch Student View"
   - "Enable auto-placement" link visible near button
   - Click the link -> browser permission prompt appears
   - If you DENY: proceed to step 4
   - If you ALLOW: proceed to step 3

3. **Granted State:**
   - Button changes to "Launch -> External Display"
   - "Enable auto-placement" link disappears
   - Click launch button -> student window opens on external display
   - Toast appears: "Opened on External Display" for 5 seconds
   - Toast auto-dismisses (no close button)

4. **Denied State:**
   - Button shows "Launch Student View" with warning icon (amber triangle)
   - "Permission denied. Learn how to reset" text visible
   - Click "Learn how to reset" -> modal opens
   - Modal shows browser-specific instructions (Chrome vs Edge)
   - Modal has numbered steps
   - Click "Got it" or X to close modal
   - Click launch button -> window opens, but may not be on external display
   - Toast appears: "Opened on this screen" for 5 seconds

5. **Single Screen (no external display):**
   - Disconnect external display or test on single-screen setup
   - Button shows "Launch Student View"
   - No permission-related UI (no link, no recovery text)
   - Launch works normally

**Pass criteria:**
- All 5 scenarios work as described
- No console errors
- UI transitions are smooth (no flash of wrong state)
  </how-to-verify>
  <resume-signal>Type "verified" if all tests pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Human verification confirms all PERM-02 through PERM-06 requirements satisfied.
</verification>

<success_criteria>
1. Human confirms button labels work correctly
2. Human confirms toast appears with correct messages
3. Human confirms permission link triggers browser prompt
4. Human confirms recovery modal shows browser-specific instructions
5. Human confirms no regressions in launch functionality
</success_criteria>

<output>
After verification, create `.planning/phases/02-permission-ux/02-04-SUMMARY.md` with verification results.
</output>
