---
phase: 23-the-chase
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - components/games/the-chase/GameBoard.tsx
  - components/games/the-chase/ChaserThinking.tsx
  - hooks/useChaserAI.ts
autonomous: true

must_haves:
  truths:
    - "GameBoard displays 7 vertical steps with contestant and chaser icons at correct positions"
    - "Position changes animate smoothly with 500ms CSS transition"
    - "Chaser AI returns answer after configurable thinking delay based on difficulty accuracy"
    - "ChaserThinking overlay shows pulsing indicator during AI decision"
  artifacts:
    - path: "components/games/the-chase/GameBoard.tsx"
      provides: "7-step vertical game board with animated positions"
      min_lines: 60
    - path: "components/games/the-chase/ChaserThinking.tsx"
      provides: "Thinking overlay for chaser AI"
      min_lines: 20
    - path: "hooks/useChaserAI.ts"
      provides: "AI opponent logic with weighted accuracy"
      exports: ["useChaserAI"]
  key_links:
    - from: "components/games/the-chase/GameBoard.tsx"
      to: "CSS transform"
      via: "translateY for position"
      pattern: "translateY"
    - from: "hooks/useChaserAI.ts"
      to: "Math.random"
      via: "weighted random for accuracy"
      pattern: "Math\\.random"
---

<objective>
Create the core visual components for The Chase: game board with animated positions and chaser AI behavior.

Purpose: The 7-step game board is central to Head-to-Head and Final Chase phases. Chaser AI needs configurable difficulty (60%/75%/90% accuracy) with a dramatic "thinking" pause before revealing answers.

Output: GameBoard component with smooth position animations, ChaserThinking overlay, useChaserAI hook with difficulty-based accuracy.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/23-the-chase/23-CONTEXT.md
@.planning/phases/23-the-chase/23-RESEARCH.md
@types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GameBoard component with animated positions</name>
  <files>components/games/the-chase/GameBoard.tsx</files>
  <action>
Create the 7-step vertical game board following CONTEXT.md decisions:

```typescript
import React from 'react';

interface GameBoardProps {
  contestantPosition: number;  // 0-6 (0 = top/chaser start, 6 = home)
  chaserPosition: number;      // 0-6
  highlightHome?: boolean;     // Flash home zone on victory
  className?: string;
}
```

Visual design per CONTEXT.md:
- Vertical orientation (chaser at top, home at bottom)
- 7 steps total (positions 0-6)
- Person icon (ðŸ‘¤) for contestant - blue circle background
- Predator silhouette icon for chaser - red circle with ðŸ˜ˆ or ðŸ¦
- No labels on steps - clean look
- "HOME" text at bottom (position 6)
- Steps as horizontal lines dividing the board

Position calculation:
```typescript
// Each step is ~14.28% of board height (100/7)
const stepPercent = 100 / 7;
const getTopPosition = (pos: number) => `${pos * stepPercent}%`;
```

Animation per CONTEXT.md:
- Use CSS transition: `transition-all duration-500 ease-out`
- Transform translateY for smooth hardware-accelerated movement

Structure:
```jsx
<div className="relative w-48 h-80 bg-slate-800 rounded-2xl border-4 border-slate-600 overflow-hidden">
  {/* Step divider lines */}
  {Array.from({ length: 6 }).map((_, i) => (
    <div key={i} className="absolute left-0 right-0 h-px bg-slate-600"
         style={{ top: `${(i + 1) * stepPercent}%` }} />
  ))}

  {/* Home zone at bottom */}
  <div className="absolute bottom-0 left-0 right-0 h-12 bg-green-600/30
    flex items-center justify-center font-bold text-green-400 text-sm">
    HOME
  </div>

  {/* Game pieces */}
  <GamePiece position={chaserPosition} type="chaser" />
  <GamePiece position={contestantPosition} type="contestant" />
</div>
```

GamePiece sub-component:
```typescript
const GamePiece: React.FC<{ position: number; type: 'contestant' | 'chaser' }> = ({ position, type }) => {
  const topPos = position * stepPercent;

  return (
    <div
      className="absolute left-1/2 w-12 h-12 -translate-x-1/2 transition-all duration-500 ease-out"
      style={{ top: `calc(${topPos}% + 2px)` }}
    >
      <div className={`w-full h-full rounded-full flex items-center justify-center text-2xl shadow-lg
        ${type === 'contestant' ? 'bg-blue-500' : 'bg-red-600'}`}>
        {type === 'contestant' ? 'ðŸ‘¤' : 'ðŸ˜ˆ'}
      </div>
    </div>
  );
};
```
  </action>
  <verify>Run `npm run build` - should compile without errors</verify>
  <done>GameBoard displays 7-step board with contestant and chaser pieces that animate smoothly on position changes</done>
</task>

<task type="auto">
  <name>Task 2: Create useChaserAI hook with difficulty-based accuracy</name>
  <files>hooks/useChaserAI.ts</files>
  <action>
Create the AI opponent hook following RESEARCH.md Pattern 4:

```typescript
import { useState, useCallback } from 'react';
import { QuizQuestion } from '../services/geminiService';

type ChaserDifficulty = 'easy' | 'medium' | 'hard';

const CHASER_ACCURACY: Record<ChaserDifficulty, number> = {
  easy: 0.60,    // 60% correct
  medium: 0.75,  // 75% correct
  hard: 0.90     // 90% correct
};

interface ChaserAIConfig {
  difficulty: ChaserDifficulty;
  thinkingDelayMs?: number;  // Default 1500ms
}

interface ChaserAIResult {
  getChaserAnswer: (question: QuizQuestion) => Promise<number>;
  isThinking: boolean;
}

export function useChaserAI({
  difficulty,
  thinkingDelayMs = 1500
}: ChaserAIConfig): ChaserAIResult {
  const [isThinking, setIsThinking] = useState(false);

  const getChaserAnswer = useCallback(async (question: QuizQuestion): Promise<number> => {
    // Start thinking phase
    setIsThinking(true);

    // Simulate thinking delay for dramatic effect
    await new Promise(resolve => setTimeout(resolve, thinkingDelayMs));

    setIsThinking(false);

    // Determine if chaser answers correctly based on difficulty
    const accuracy = CHASER_ACCURACY[difficulty];
    const shouldAnswerCorrectly = Math.random() < accuracy;

    if (shouldAnswerCorrectly) {
      return question.correctAnswerIndex;
    } else {
      // Pick a random wrong answer
      const wrongIndices = [0, 1, 2, 3].filter(
        i => i !== question.correctAnswerIndex
      );
      return wrongIndices[Math.floor(Math.random() * wrongIndices.length)];
    }
  }, [difficulty, thinkingDelayMs]);

  return { getChaserAnswer, isThinking };
}

// Export accuracy constants for display in UI if needed
export { CHASER_ACCURACY };
export type { ChaserDifficulty };
```

Key behaviors:
- isThinking becomes true during delay, false after
- Accuracy is percentage chance of correct answer
- Wrong answers are randomly selected from 3 wrong options
- Delay adds tension before revealing chaser's answer
  </action>
  <verify>Run `npm run build` - should compile without errors</verify>
  <done>useChaserAI exports getChaserAnswer with thinking state and difficulty-based accuracy</done>
</task>

<task type="auto">
  <name>Task 3: Create ChaserThinking overlay component</name>
  <files>components/games/the-chase/ChaserThinking.tsx</files>
  <action>
Create the thinking overlay shown during chaser AI decision:

```typescript
import React from 'react';

interface ChaserThinkingProps {
  isVisible: boolean;
}

const ChaserThinking: React.FC<ChaserThinkingProps> = ({ isVisible }) => {
  if (!isVisible) return null;

  return (
    <div className="fixed inset-0 bg-black/60 flex items-center justify-center z-50 animate-fade-in">
      <div className="bg-red-900/90 p-8 rounded-2xl text-center shadow-2xl border-4 border-red-600">
        {/* Chaser icon */}
        <div className="text-6xl mb-4 animate-pulse">ðŸ˜ˆ</div>

        {/* Thinking text */}
        <h3 className="text-2xl font-bold text-white mb-2">
          The Chaser is thinking...
        </h3>

        {/* Animated dots */}
        <div className="flex justify-center gap-2">
          <span className="w-3 h-3 bg-red-400 rounded-full animate-bounce"
                style={{ animationDelay: '0ms' }} />
          <span className="w-3 h-3 bg-red-400 rounded-full animate-bounce"
                style={{ animationDelay: '150ms' }} />
          <span className="w-3 h-3 bg-red-400 rounded-full animate-bounce"
                style={{ animationDelay: '300ms' }} />
        </div>
      </div>
    </div>
  );
};

export default ChaserThinking;
```

Styling details:
- Full screen overlay with dark backdrop
- Red themed to match chaser color
- Pulsing chaser icon for tension
- Animated bouncing dots for "thinking" effect
- fade-in animation uses existing animate-fade-in class
  </action>
  <verify>Run `npm run build` - should compile without errors</verify>
  <done>ChaserThinking shows pulsing overlay when isVisible is true</done>
</task>

</tasks>

<verification>
- `npm run build` passes with no TypeScript errors
- GameBoard renders 7 steps with position indicators
- GamePiece components animate smoothly on position change
- useChaserAI returns isThinking and getChaserAnswer
- ChaserThinking renders overlay with animation
</verification>

<success_criteria>
- GameBoard displays vertical 7-step track with HOME at bottom
- Contestant (blue ðŸ‘¤) and chaser (red ðŸ˜ˆ) icons positioned correctly
- Position changes animate with 500ms CSS transition
- useChaserAI provides 60%/75%/90% accuracy for easy/medium/hard
- ChaserThinking overlay shows animated "thinking" state
</success_criteria>

<output>
After completion, create `.planning/phases/23-the-chase/23-02-SUMMARY.md`
</output>
