---
phase: 26-student-view-integration
plan: 02
type: execute
wave: 2
depends_on: ["26-01"]
files_modified:
  - components/StudentGameView.tsx
autonomous: true

must_haves:
  truths:
    - "Phase label visible at top center of screen for all multi-phase games"
    - "Turn banners ('CONTESTANT'S TURN' / 'CHASER'S TURN') display prominently during turn-based phases"
    - "Timers in student view use classroom-size display with screen glow urgency"
    - "Answer options dim/grayscale when wrong answers are revealed"
  artifacts:
    - path: "components/StudentGameView.tsx"
      provides: "Enhanced student views with phase banners, large timers, answer dimming"
      contains: "PhaseBanner"
  key_links:
    - from: "components/StudentGameView.tsx"
      to: "index.html"
      via: "CSS animation classes"
      pattern: "animate-urgency-glow|animate-rapid-pulse"
    - from: "components/StudentGameView.tsx"
      to: "components/games/shared/Timer.tsx"
      via: "Timer component import"
      pattern: "import.*Timer"
---

<objective>
Enhance StudentGameView with phase banners, turn indicators, and classroom-visible timers.

Purpose: Meet VIEW-03 (timer visibility) and VIEW-04 (current game state clarity) requirements
Output: StudentGameView with phase/turn banners and enhanced timer displays
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-student-view-integration/26-CONTEXT.md
@.planning/phases/26-student-view-integration/26-RESEARCH.md
@.planning/phases/26-student-view-integration/26-01-SUMMARY.md

@components/StudentGameView.tsx
@types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add PhaseBanner helper component</name>
  <files>components/StudentGameView.tsx</files>
  <action>
Add a PhaseBanner component inside StudentGameView.tsx (before the main component definition):

```typescript
// Phase and turn banner overlay for classroom visibility
interface PhaseBannerProps {
  phase: string;
  turn?: 'contestant' | 'chaser';
}

const PhaseBanner: React.FC<PhaseBannerProps> = ({ phase, turn }) => {
  return (
    <div className="fixed top-0 left-0 right-0 z-50 flex flex-col items-center pt-4 gap-2 pointer-events-none">
      {/* Phase Label - always visible */}
      <div className="px-6 py-2 bg-slate-900/90 backdrop-blur-sm rounded-full border-2 border-slate-600">
        <span className="text-lg md:text-xl font-bold text-amber-400 uppercase tracking-widest">
          {phase}
        </span>
      </div>

      {/* Turn Banner - shown when applicable */}
      {turn && (
        <div
          className={`
            px-10 py-4 rounded-2xl text-2xl md:text-4xl font-black uppercase tracking-wide
            shadow-2xl transition-all duration-500 animate-fade-in
            ${turn === 'contestant'
              ? 'bg-blue-600 text-white shadow-blue-500/50'
              : 'bg-red-600 text-white shadow-red-500/50'}
          `}
        >
          {turn === 'contestant' ? "CONTESTANT'S TURN" : "CHASER'S TURN"}
        </div>
      )}
    </div>
  );
};
```

This component shows:
- Phase label in amber at top center (always visible)
- Turn banner below phase when turn prop is provided
- Uses existing animate-fade-in class for turn transitions
  </action>
  <verify>Search StudentGameView.tsx for "PhaseBanner" - should find component definition</verify>
  <done>PhaseBanner helper component exists in StudentGameView.tsx</done>
</task>

<task type="auto">
  <name>Task 2: Add UrgentTimer helper and screen glow support</name>
  <files>components/StudentGameView.tsx</files>
  <action>
Add an UrgentTimer helper component that combines large display with screen glow:

```typescript
// Large timer with screen edge glow for urgency
interface UrgentTimerProps {
  seconds: number;
  label?: string;
  isActive?: boolean; // Only show urgency effects when active
}

const UrgentTimer: React.FC<UrgentTimerProps> = ({ seconds, label, isActive = true }) => {
  const isUrgent = seconds <= 10 && seconds > 0 && isActive;

  // Format as M:SS
  const mins = Math.floor(seconds / 60);
  const secs = seconds % 60;
  const display = `${mins}:${secs.toString().padStart(2, '0')}`;

  return (
    <>
      {/* Screen edge glow overlay for urgency */}
      {isUrgent && (
        <div className="fixed inset-0 pointer-events-none z-30 animate-urgency-glow" />
      )}

      <div className="text-center">
        {label && (
          <div className="text-sm text-slate-400 uppercase tracking-wider mb-2">{label}</div>
        )}
        <div className={`
          text-7xl md:text-8xl font-black font-mono transition-all duration-300
          ${isUrgent
            ? 'text-red-500 animate-rapid-pulse'
            : 'text-white'}
        `}>
          {display}
        </div>
      </div>
    </>
  );
};
```

This provides:
- text-7xl/8xl size for classroom visibility
- Screen edge glow when urgent and active
- Rapid pulse animation on timer text when urgent
- Optional label above timer
  </action>
  <verify>Search StudentGameView.tsx for "UrgentTimer" - should find component definition with animate-urgency-glow</verify>
  <done>UrgentTimer helper component exists with screen glow support</done>
</task>

<task type="auto">
  <name>Task 3: Enhance TheChaseStudentView with banners and large timers</name>
  <files>components/StudentGameView.tsx</files>
  <action>
Update TheChaseStudentView to use PhaseBanner and UrgentTimer:

**Cash Builder phase:**
- Add `<PhaseBanner phase="Cash Builder" />` at the start of return
- Replace the existing timer display with `<UrgentTimer seconds={state.cashBuilderTimeRemaining} label="Time Remaining" />`
- Keep the score display as-is but use consistent styling

**Head-to-Head phase:**
- Add `<PhaseBanner phase="Head-to-Head" turn={state.isChaserThinking ? 'chaser' : 'contestant'} />`
- Note: During reveal/answered state, determine turn from who just answered

Determine turn logic for head-to-head:
- If contestantAnswer is set but not currentQuestionAnswered -> contestant just answered, showing chaser
- If showChaserAnswer -> chaser's turn to answer
- Default to 'contestant' for question display

**Final Chase phases:**
- Add `<PhaseBanner phase="Final Chase" turn={isContestantPhase ? 'contestant' : 'chaser'} />`
- Replace the text-6xl timer displays with UrgentTimer, passing isActive based on current phase

Update the timers in final chase to be larger:
```typescript
<UrgentTimer
  seconds={state.finalChaseContestantTime}
  label="Contestant"
  isActive={isContestantPhase}
/>
<UrgentTimer
  seconds={state.finalChaseChaserTime}
  label="Chaser"
  isActive={!isContestantPhase}
/>
```

**Game Over phase:** No banner needed - the VICTORY/CAUGHT result is prominent enough.
  </action>
  <verify>Search StudentGameView.tsx for "PhaseBanner phase=\"Cash Builder\"" - should find usage</verify>
  <done>TheChaseStudentView shows phase banners and uses large timers with urgency glow</done>
</task>

</tasks>

<verification>
1. Check StudentGameView.tsx contains PhaseBanner component definition
2. Check StudentGameView.tsx contains UrgentTimer component definition
3. Check TheChaseStudentView uses PhaseBanner in cash-builder, head-to-head, final-chase phases
4. Check timers use text-7xl/8xl sizing
5. Run `npm run build` to verify no TypeScript errors
</verification>

<success_criteria>
- PhaseBanner shows phase label and optional turn indicator
- UrgentTimer displays large (text-7xl/8xl) with screen glow at <=10s
- The Chase student view shows phase banners for all gameplay phases
- Final Chase timers show urgency glow when active timer is <=10s
</success_criteria>

<output>
After completion, create `.planning/phases/26-student-view-integration/26-02-SUMMARY.md`
</output>
