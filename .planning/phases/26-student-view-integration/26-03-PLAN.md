---
phase: 26-student-view-integration
plan: 03
type: execute
wave: 2
depends_on: ["26-01"]
files_modified:
  - components/StudentGameView.tsx
autonomous: true

must_haves:
  truths:
    - "Beat the Chaser shows phase banner and turn indicators"
    - "Dual timers in Timed Battle use classroom-size display with urgency glow"
    - "Active player timer has amber glow ring highlight"
    - "Timers pause/resume visual state matches activePlayer"
  artifacts:
    - path: "components/StudentGameView.tsx"
      provides: "Enhanced BeatTheChaserStudentView with banners and large dual timers"
      contains: "Timed Battle"
  key_links:
    - from: "BeatTheChaserStudentView"
      to: "PhaseBanner"
      via: "component usage"
      pattern: "PhaseBanner phase="
---

<objective>
Enhance BeatTheChaserStudentView with phase banners and classroom-visible dual timers.

Purpose: Complete VIEW-03 and VIEW-04 requirements for Beat the Chaser game
Output: Beat the Chaser student view with large timers, urgency effects, and turn clarity
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-student-view-integration/26-CONTEXT.md
@.planning/phases/26-student-view-integration/26-RESEARCH.md
@.planning/phases/26-student-view-integration/26-01-SUMMARY.md

@components/StudentGameView.tsx
@types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance BeatTheChaserStudentView Cash Builder phase</name>
  <files>components/StudentGameView.tsx</files>
  <action>
Update the Cash Builder phase in BeatTheChaserStudentView:

1. Add PhaseBanner at the start of the return:
   ```typescript
   <PhaseBanner phase="Cash Builder" />
   ```

2. Keep the existing Time Bank display but enhance the time value to be larger:
   - Change the time display from text-8xl to use the same styling pattern
   - Keep the green color scheme for time bank (vs red urgency - this is accumulating, not counting down)

The Cash Builder in Beat the Chaser is NOT timed - it's accumulating time per correct answer.
So no urgency styling needed here. Just add the phase banner for clarity.

Current code to preserve structure:
```typescript
if (state.phase === 'cash-builder') {
  return (
    <div className="...">
      <PhaseBanner phase="Cash Builder" />
      {/* Rest of existing Cash Builder UI */}
    </div>
  );
}
```
  </action>
  <verify>Search StudentGameView.tsx for "PhaseBanner phase=\"Cash Builder\"" in BeatTheChaserStudentView section</verify>
  <done>BeatTheChaserStudentView Cash Builder phase shows phase banner</done>
</task>

<task type="auto">
  <name>Task 2: Enhance Timed Battle with large dual timers and urgency glow</name>
  <files>components/StudentGameView.tsx</files>
  <action>
Refactor the Timed Battle phase in BeatTheChaserStudentView to use enhanced visuals:

1. Add PhaseBanner with turn indicator:
   ```typescript
   <PhaseBanner
     phase="Timed Battle"
     turn={state.activePlayer}
   />
   ```

2. Add screen edge glow when active timer is urgent:
   The existing code checks `isUrgent(time)` - add the screen glow overlay:
   ```typescript
   const contestantUrgent = isUrgent(state.contestantTime) && state.activePlayer === 'contestant';
   const chaserUrgent = isUrgent(state.chaserTime) && state.activePlayer === 'chaser';

   {/* Screen edge glow for active urgent timer */}
   {(contestantUrgent || chaserUrgent) && (
     <div className="fixed inset-0 pointer-events-none z-30 animate-urgency-glow" />
   )}
   ```

3. Enhance timer text sizing - already text-6xl md:text-8xl, which is good
   But update urgent state to use animate-rapid-pulse instead of animate-pulse:
   ```typescript
   ${isUrgent(state.contestantTime) && state.activePlayer === 'contestant'
     ? 'text-red-500 animate-rapid-pulse'
     : 'text-white'}
   ```

4. The active player highlight (ring-4 ring-yellow-400 scale-105) is already good.
   Ensure the amber glow uses ring-amber-400 instead of ring-yellow-400 for consistency
   with CONTEXT.md decision ("amber/gold glow ring").

Update both timer containers:
- ring-4 ring-amber-400 shadow-lg shadow-amber-400/30 (for active)
- Keep the existing scale-105/scale-95 for emphasis

5. Remove the "YOUR TURN" / "CHASER'S TURN" text below timers since PhaseBanner now shows this
   OR keep them but smaller as secondary confirmation.

Decision: Keep the small "YOUR TURN" labels as they're inside the timer container and provide additional clarity.
  </action>
  <verify>Search StudentGameView.tsx for "animate-urgency-glow" in BeatTheChaserStudentView timed-battle section</verify>
  <done>Timed Battle phase has large timers with screen glow urgency and amber ring highlight</done>
</task>

<task type="auto">
  <name>Task 3: Verify answer dimming in Beat the Chaser views</name>
  <files>components/StudentGameView.tsx</files>
  <action>
Review and enhance answer reveal styling in BeatTheChaserStudentView:

**Cash Builder phase:**
The current code shows contestant answer but doesn't have reveal dimming.
Cash Builder in Beat the Chaser is rapid-fire without explicit reveal phase.
No changes needed - answers are shown as selected, not revealed.

**Timed Battle phase:**
The current code shows both contestantAnswer and chaserAnswer but doesn't dim wrong answers.
This is turn-based: contestant answers, then chaser answers same question.

For answer reveal (when both have answered), add dimming for non-correct options:

Check if there's a currentQuestionAnswered or similar state that indicates reveal.
Looking at BeatTheChaserState in types.ts - no explicit reveal state, but we can derive:
- If contestantAnswer is set AND chaserAnswer is set (or phase moved on) -> reveal state

For now, the current implementation shows selections without reveal dimming.
This matches the existing behavior and VIEW-02 is already satisfied by:
- Not showing correct answer highlighting until appropriate

If explicit reveal is needed, add:
```typescript
const showResult = state.contestantAnswer !== null && state.chaserAnswer !== null;
// Then in option className:
${showResult && !isCorrect && !isContestantAnswer && !isChaserAnswer ? 'opacity-30 grayscale' : ''}
```

Check if currentQuestion.correctAnswerIndex is available and add the reveal styling pattern.

Note: Beat the Chaser may not have explicit "reveal" - teacher advances through turns.
Preserve current behavior but ensure wrong answers dim when answer is known.
  </action>
  <verify>Check BeatTheChaserStudentView Timed Battle for answer option styling with opacity/grayscale for wrong answers</verify>
  <done>Beat the Chaser answer options dim correctly when answers are revealed</done>
</task>

</tasks>

<verification>
1. Check BeatTheChaserStudentView has PhaseBanner in Cash Builder phase
2. Check Timed Battle phase has PhaseBanner with turn prop
3. Check screen glow overlay exists for urgent active timer
4. Check timer styling uses animate-rapid-pulse for urgent state
5. Check active timer container uses ring-amber-400 (not yellow)
6. Run `npm run build` to verify no TypeScript errors
</verification>

<success_criteria>
- Cash Builder phase shows "Cash Builder" phase banner
- Timed Battle shows "Timed Battle" banner with "CONTESTANT'S TURN" or "CHASER'S TURN"
- Screen edge glow appears when active timer <=10s
- Active timer container has amber glow ring highlight
- Timer text uses rapid-pulse animation when urgent
</success_criteria>

<output>
After completion, create `.planning/phases/26-student-view-integration/26-03-SUMMARY.md`
</output>
