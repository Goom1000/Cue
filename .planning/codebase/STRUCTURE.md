# Codebase Structure

**Analysis Date:** 2025-01-18

## Directory Layout

```
DEV - PiPi/
├── .planning/           # Planning documents (this directory)
│   └── codebase/        # Codebase analysis documents
├── components/          # React UI components
│   ├── Button.tsx       # Reusable button with variants
│   ├── Dashboard.tsx    # Empty placeholder file
│   ├── PresentationView.tsx  # Full-screen presentation mode
│   ├── ResourceHub.tsx  # Printable resources modal
│   ├── SlideCard.tsx    # Slide editing workspace
│   └── SlideRenderers.tsx    # Layout-specific slide renderers
├── services/            # External service integrations
│   ├── geminiService.ts # Gemini AI API calls
│   └── pptxService.ts   # PowerPoint export logic
├── App.tsx              # Main application component (582 lines)
├── index.tsx            # React entry point
├── index.html           # HTML shell with CDN dependencies
├── types.ts             # TypeScript interfaces and enums
├── vite.config.ts       # Vite build configuration
├── tsconfig.json        # TypeScript configuration
├── package.json         # Dependencies and scripts
├── metadata.json        # App metadata
├── README.md            # Project documentation
├── .env.local           # Environment variables (gitignored)
└── .gitignore           # Git ignore rules
```

## Directory Purposes

**components/:**
- Purpose: Reusable React UI components
- Contains: TSX files for buttons, modals, slide rendering, presentation mode
- Key files: `PresentationView.tsx` (544 lines), `SlideRenderers.tsx` (348 lines), `SlideCard.tsx` (203 lines)

**services/:**
- Purpose: External API integrations and business logic
- Contains: Gemini AI service functions, PPTX export utility
- Key files: `geminiService.ts` (433 lines - all AI operations), `pptxService.ts` (82 lines)

**.planning/codebase/:**
- Purpose: Architecture and codebase analysis documents
- Contains: Markdown files generated by codebase mapping
- Key files: ARCHITECTURE.md, STRUCTURE.md

## Key File Locations

**Entry Points:**
- `index.html`: HTML shell, CDN script loading, importmap for ESM
- `index.tsx`: React root render
- `App.tsx`: Application state and main UI orchestration

**Configuration:**
- `vite.config.ts`: Vite dev server (port 3000), React plugin, env variable injection
- `tsconfig.json`: TypeScript ES2022 target, bundler module resolution, `@/*` path alias
- `.env.local`: `GEMINI_API_KEY` environment variable
- `package.json`: Dependencies (react 19, @google/genai), npm scripts (dev, build, preview)

**Core Logic:**
- `App.tsx`: State machine, all handlers, UI rendering by AppState
- `services/geminiService.ts`: All AI generation functions (slides, images, revisions, quizzes, resources)
- `services/pptxService.ts`: PowerPoint file generation via PptxGenJS

**UI Components:**
- `components/PresentationView.tsx`: Presentation mode with teleprompter, student window, quiz overlay
- `components/SlideCard.tsx`: Slide editing interface (title, bullets, image prompt, AI revision)
- `components/SlideRenderers.tsx`: 5 layout strategies (Default, FullImage, Flowchart, Grid, TileOverlap)
- `components/ResourceHub.tsx`: Modal for generating/previewing printable resources
- `components/Button.tsx`: Styled button with 6 variants

**Types:**
- `types.ts`: `Slide`, `LessonResource`, `LessonPlan`, `AppState` interfaces/enums

## Naming Conventions

**Files:**
- PascalCase for React components: `SlideCard.tsx`, `PresentationView.tsx`
- camelCase for services: `geminiService.ts`, `pptxService.ts`
- lowercase for config: `vite.config.ts`, `tsconfig.json`
- lowercase for entry: `index.tsx`, `index.html`

**Directories:**
- lowercase plural for collections: `components/`, `services/`
- dot-prefixed for hidden/config: `.planning/`

**Exports:**
- Default export for React components
- Named exports for service functions
- Named exports for types/interfaces

## Where to Add New Code

**New Feature (complex, multi-component):**
- Primary code: `App.tsx` (state, handlers) + new component in `components/`
- Tests: Not currently present; would add `__tests__/` or `*.test.tsx` files

**New Component:**
- Implementation: `components/ComponentName.tsx`
- Import in: `App.tsx` or parent component
- Pattern: Functional component with TypeScript props interface

**New Service Function:**
- Implementation: `services/geminiService.ts` (for AI) or new service file
- Export: Named export function
- Pattern: Async function, use `GoogleGenAI` client, return typed Promise

**New Slide Layout:**
- Implementation: Add new layout component in `components/SlideRenderers.tsx`
- Update: Add case to `SlideContentRenderer` switch statement
- Update: Add layout option to `types.ts` Slide interface `layout` union

**Utilities/Helpers:**
- Location: Create `utils/` directory or inline in relevant file
- Currently no dedicated utils directory

**New Type/Interface:**
- Location: `types.ts`
- Pattern: Export interface or type alias

## Special Directories

**.planning/:**
- Purpose: Development planning and codebase documentation
- Generated: Yes (by mapping tools)
- Committed: Yes (for team reference)

**node_modules/:**
- Purpose: NPM dependencies
- Generated: Yes (via npm install)
- Committed: No (in .gitignore)

**build/ or dist/:**
- Purpose: Production build output
- Generated: Yes (via `npm run build`)
- Committed: No (typically gitignored)

---

*Structure analysis: 2025-01-18*
