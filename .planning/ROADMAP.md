# Roadmap: Cue

## Milestones

<details>
<summary>Shipped milestones: v1.0 through v4.1 (Phases 1-64, 215 plans)</summary>

See MILESTONES.md for full history.

</details>

<details>
<summary>Shipped: v5.0 Smart Generation (Phases 65-68) -- SHIPPED 2026-02-16</summary>

- [x] Phase 65: Foundation Types + Phase Detection (2/2 plans) -- completed 2026-02-14
- [x] Phase 66: Resource Processing + Upload (2/2 plans) -- completed 2026-02-14
- [x] Phase 67: Generation Pipeline (3/3 plans) -- completed 2026-02-15
- [x] Phase 68: Phase-Aware UI + Resource Injection (3/3 plans) -- completed 2026-02-16

</details>

### v6.0 Scripted Import (In Progress)

**Milestone Goal:** Enable teachers to import pre-scripted lesson plans (with explicit Say:/Write on board:/Ask: markers) directly into Cue with minimal AI transformation, preserving the teacher's exact words as the teleprompter script.

## Phases

**Phase Numbering:**
- Integer phases (69, 70, 71...): Planned milestone work
- Decimal phases (70.1, 70.2): Urgent insertions (marked with INSERTED)

- [ ] **Phase 69: Scripted Parser** - Pure-function parser extracts typed blocks from marker-annotated lesson plans
- [ ] **Phase 70: Slide Mapper + Pipeline Integration** - Converts parsed blocks to slides and wires scripted mode into the generation pipeline
- [ ] **Phase 71: AI Image Prompts + Layout Assignment** - Minimal AI enrichment call adds image prompts and layout selection to scripted slides
- [ ] **Phase 72: Day Picker UI + Mode Selector** - Teacher-facing UI for multi-day selection and scripted import mode toggle
- [ ] **Phase 73: Claude Chat Tips** - Static tips page with copyable prompt template for generating Cue-compatible lesson plans

## Phase Details

### Phase 69: Scripted Parser
**Goal**: Teachers' marker-annotated lesson plans are parsed into typed, structured blocks that downstream phases can consume
**Depends on**: Nothing (foundation phase)
**Requirements**: PARSE-01, PARSE-02, PARSE-03, PARSE-04, PARSE-05, PARSE-06, PARSE-07, PARSE-08
**Success Criteria** (what must be TRUE):
  1. A lesson plan with Say:/Ask:/Write on board:/Activity: markers is parsed into correctly-typed ScriptedBlock objects with verbatim content preserved
  2. Multi-line Say: blocks (paragraphs of teacher script after a single marker) are captured in full, not truncated at line end
  3. A multi-day lesson plan with ## Day 1 / ## Day 2 headers is split into separate day sections with accurate block counts per day
  4. Unmarked prose between markers is captured as implicit Say: blocks rather than silently dropped
  5. Section headings (## Hook, ### I Do, ### We Do, ### You Do, ### Plenary) are detected as slide boundary markers with lesson phase labels
**Plans:** 1 plan

Plans:
- [ ] 69-01-PLAN.md â€” Types + parser TDD (all 8 PARSE requirements)

### Phase 70: Slide Mapper + Pipeline Integration
**Goal**: Parsed blocks convert into valid Cue slides and the scripted mode is wired into the generation pipeline without breaking existing modes
**Depends on**: Phase 69
**Requirements**: MAP-01, MAP-02, MAP-03, MAP-04, MAP-05, PIPE-01, PIPE-02, PIPE-05
**Success Criteria** (what must be TRUE):
  1. Say: blocks appear verbatim in speakerNotes, Write on board: and Ask: blocks appear as content[] bullets, and Activity: blocks produce work-together typed slides
  2. Every generated slide has exactly (content.length + 1) pointing-right-delimited segments in speakerNotes (the teleprompter segment count invariant)
  3. Slide boundaries are created only on section headings and phase transitions -- not per-marker -- so a detailed lesson plan does not explode into 50+ slides
  4. Scripted mode bypasses all three AI generation passes (generate, gap analysis, auto-fill) and returns slides directly from the mapper
  5. Existing Fresh, Refine, and Blend modes produce identical output before and after the scripted mode addition (regression-safe)
**Plans**: TBD

Plans:
- [ ] 70-01: TBD
- [ ] 70-02: TBD

### Phase 71: AI Image Prompts + Layout Assignment
**Goal**: Scripted slides receive AI-generated image prompts and layout assignments via a single minimal batch call, with graceful fallback if AI fails
**Depends on**: Phase 70
**Requirements**: PIPE-03, PIPE-04
**Success Criteria** (what must be TRUE):
  1. After scripted import, each slide has an imagePrompt and layout assignment generated by a single batch AI call (~700 tokens total)
  2. If the AI enrichment call fails (network error, rate limit, invalid response), slides still import successfully with synthesized fallback prompts derived from slide titles
**Plans**: TBD

Plans:
- [ ] 71-01: TBD

### Phase 72: Day Picker UI + Mode Selector
**Goal**: Teachers can choose scripted import mode from the landing page, select which days to import from multi-day lesson plans, and see import statistics before generation
**Depends on**: Phase 69, Phase 70
**Requirements**: DAY-01, DAY-02, DAY-03, DAY-04, DAY-05, MODE-01, MODE-02, MODE-03
**Success Criteria** (what must be TRUE):
  1. After uploading a lesson plan, the teacher can toggle between AI generation and scripted import mode on the landing page
  2. When a multi-day lesson plan is uploaded in scripted mode, a day picker appears showing day cards with section/block count previews, and the teacher can select one or more days (or all)
  3. When importing a subset of days, a warning is shown about potential cross-day references
  4. Before generation, import preview displays detected statistics (days count, sections count, script blocks count)
  5. Scripted mode works with DOCX, PDF, and plain text uploads
**Plans**: TBD

Plans:
- [ ] 72-01: TBD
- [ ] 72-02: TBD

### Phase 73: Claude Chat Tips
**Goal**: Teachers have a reference page with a copyable prompt template for generating Cue-compatible scripted lesson plans in Claude chat
**Depends on**: Phase 69 (shares SUPPORTED_MARKERS constant)
**Requirements**: TIPS-01, TIPS-02, TIPS-03, TIPS-04, TIPS-05
**Success Criteria** (what must be TRUE):
  1. A static tips page is accessible from the landing page showing the supported marker format (Say:, Ask:, Write on board:, Activity:, section headings, Day headers) with an example lesson plan snippet
  2. The teacher can copy the prompt template to clipboard with a single click, with toast confirmation feedback
  3. The marker list on the tips page and the parser share a single SUPPORTED_MARKERS constant, so they cannot drift out of sync
**Plans**: TBD

Plans:
- [ ] 73-01: TBD

## Progress

**Execution Order:**
Phases execute in numeric order: 69 -> 70 -> 71 -> 72 -> 73

| Phase | Milestone | Plans Complete | Status | Completed |
|-------|-----------|---------------|--------|-----------|
| 65. Foundation Types + Phase Detection | v5.0 | 2/2 | Complete | 2026-02-14 |
| 66. Resource Processing + Upload | v5.0 | 2/2 | Complete | 2026-02-14 |
| 67. Generation Pipeline | v5.0 | 3/3 | Complete | 2026-02-15 |
| 68. Phase-Aware UI + Resource Injection | v5.0 | 3/3 | Complete | 2026-02-16 |
| 69. Scripted Parser | v6.0 | 0/? | Not started | - |
| 70. Slide Mapper + Pipeline Integration | v6.0 | 0/? | Not started | - |
| 71. AI Image Prompts + Layout Assignment | v6.0 | 0/? | Not started | - |
| 72. Day Picker UI + Mode Selector | v6.0 | 0/? | Not started | - |
| 73. Claude Chat Tips | v6.0 | 0/? | Not started | - |

---
*Roadmap created: 2026-02-14*
*Last updated: 2026-02-19 -- v6.0 Scripted Import roadmap created*
